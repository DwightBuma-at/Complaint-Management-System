<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Complaint Management System</title>
  <!-- Bootstrap 5 CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <style>
    body {
      background: #f4f6f9;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .hero {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(to right, #0066cc, #003366);
      color: white;
      text-align: center;
    }
    .btn-custom {
      width: 200px;
      margin: 10px;
    }
    .register-link {
      margin-top: 20px;
      color: #fff;
    }
    .register-link a {
      color: #ffc107;
      text-decoration: none;
      font-weight: bold;
      cursor: pointer;
    }
    .register-link a:hover {
      text-decoration: none; /* remove browser default underline */
      color: #ffca28; /* lighter shade on hover */
      transform: scale(1.05);
    }

    .register-link a::after {
      content: "";
      position: absolute;
      width: 0;
      height: 2px;
      bottom: -3px;
      left: 0;
      background-color: #ffc107;
      transition: width 0.3s ease;
    }

    .register-link a:hover::after {
      width: 100%;
    }
    /* Stylish description container */
    .register-description {
      margin-bottom: 1.5rem;
      text-align: center;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      background: #e0f0ff;
      box-shadow: 0 4px 12px rgba(0, 102, 204, 0.25);
      color: #004080;
      font-size: 1.1rem;
      font-weight: 500;
      line-height: 1.4;
      user-select: none;
    }
    .register-description strong {
      display: block;
      font-size: 1.8rem;
      font-weight: 900;
      color: #007bff;
      margin-bottom: 0.3rem;
      text-shadow: 1px 1px 3px rgba(0, 123, 255, 0.4);
    }
    /* Detect address button style */
    #detectAddressBtn {
      margin-bottom: 0.8rem;
      width: 100%;
    }

    .btn-formal {
      background-color: #004080; /* Dark blue */
      color: white;
      border: none;
      width: 200px;
      margin: 10px;
    }

    .btn-formal:hover {
      background-color: #003366; /* Slightly darker on hover */
      color: white;
    }

    .submit-hover:hover {
      background-color: #e0a800 !important; /* darker warning color */
      color: #212529 !important;            /* optional text color tweak */
      transform: scale(1.05);
      transition: all 0.2s ease-in-out;
      box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.2);
    }

    .register-link a {
    color: #ffc107; /* bright yellow/orange color */
    text-decoration: none;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-block;
    position: relative;
  }

  /* Underline effect on hover */
  .register-link a::after {
    content: "";
    position: absolute;
    width: 0;
    height: 2px;
    bottom: -3px;
    left: 0;
    background-color: #ffc107;
    transition: width 0.3s ease;
  }

  .register-link a:hover {
    color: #ffca28; /* lighter shade on hover */
    transform: scale(1.05);
  }

  .register-link a:hover::after {
    width: 100%;
  }

  .modal-tall .modal-content {
    min-height: 550px; /* You can increase to 600px or 650px if needed */
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 2rem 1.5rem;
  }

  .modal-tall .modal-content {
    min-height: 550px; /* Adjust height as needed */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* Push content to top & bottom */
    padding: 2rem 1.5rem;
  }

  .modal-tall .modal-body {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: flex-end; /* Stick content to the bottom */
  }

  .animated-underline {
  position: relative;
  background: none;
  border: none;
  color: black;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 1rem;
  padding: 0;
}

.animated-underline::after {
  content: "";
  position: absolute;
  width: 0;
  height: 2px;
  bottom: -3px;
  left: 0;
  background-color: #ffc107; /* Yellow underline */
  transition: width 0.3s ease;
}

.animated-underline:hover {
  color: black; /* Keep text color black on hover */
  transform: scale(1.05);
}

.animated-underline:hover::after {
  width: 100%;
}

.btn-dark {
  background-color: #2c3e50;
  border: none;
}

.btn-dark:hover {
  background-color: #1a252f;
}

.digit-box {
  width: 50px;
  height: 55px;
  font-size: 1.5rem;
  border-radius: 0.5rem;
  border: 2px solid #ced4da;
}
  </style>
</head>
<body>

<!-- Admin Login Button (Top Center) -->
<div class="position-fixed top-0 start-50 translate-middle-x mt-3 z-3">
  <button 
    type="button" 
    class="btn btn-dark btn-sm rounded-pill shadow px-4 fw-semibold" 
    data-bs-toggle="modal" 
    data-bs-target="#adminLoginModal">
    <i class="bi bi-person-gear me-2"></i> Admin Login
  </button>
</div>

<!-- Admin Login Options Modal -->
<div class="modal fade" id="adminLoginModal" tabindex="-1" aria-labelledby="adminLoginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow rounded-4">
      <div class="modal-header bg-dark text-white rounded-top-4">
        <h5 class="modal-title fw-bold" id="adminLoginModalLabel">
          <i class="bi bi-shield-lock-fill me-2"></i>Admin Access
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center py-4">
        <p class="fs-5 mb-4 text-dark">Please select an option:</p>
        <div class="d-flex flex-column gap-3 px-4">
          <a href="#" class="btn btn-primary btn-lg fw-semibold rounded-pill px-5" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#adminLoginFormModal">
            <i class="bi bi-box-arrow-in-right me-2"></i>Login
          </a>
          <a href="#" class="btn btn-outline-primary btn-lg fw-semibold rounded-pill px-5" data-bs-dismiss="modal" data-bs-toggle="modal" data-bs-target="#adminRegisterModal">
            <i class="bi bi-person-plus me-2"></i>Sign Up
          </a>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- Admin Access Key Prompt Modal After Login -->
<div class="modal fade" id="adminAccessKeyPromptModal" tabindex="-1" aria-labelledby="adminAccessKeyPromptModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-warning text-dark rounded-top-4">
        <h5 class="modal-title fw-bold" id="adminAccessKeyPromptModalLabel">
          <i class="bi bi-key-fill me-2"></i>Enter Admin Access Key
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center py-4 px-4">
        <p class="text-dark fs-5 mb-4">
          For added security, please enter your <strong>6-digit Admin Access Key</strong> that was set during registration.
        </p>

        <div class="mb-4 d-flex justify-content-center gap-2">
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="accessDigit1" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="accessDigit2" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="accessDigit3" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="accessDigit4" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="accessDigit5" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="accessDigit6" />
        </div>

        <div id="adminAccessKeyError" class="text-danger small mb-3"></div>

        <button class="btn btn-primary w-100 fw-semibold py-2 rounded-3" id="submitAdminAccessKeyBtn">
          <i class="bi bi-shield-lock me-2"></i>Verify Key & Continue
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Admin Login Modal -->
<div class="modal fade" id="adminLoginFormModal" tabindex="-1" aria-labelledby="adminLoginFormModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-dark text-white rounded-top-4">
        <h5 class="modal-title fw-bold" id="adminLoginFormModalLabel">
          <i class="bi bi-box-arrow-in-right me-2"></i>Admin Login
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body px-4 py-4">
        <form id="adminLoginForm">
          <div class="form-floating mb-3">
            <input type="email" class="form-control rounded-3" id="adminLoginEmail" placeholder="admin@example.com" required />
            <label for="adminLoginEmail">Admin Email</label>
          </div>

          <div class="form-floating mb-3">
            <input type="password" class="form-control rounded-3" id="adminLoginPassword" placeholder="Enter password" required />
            <label for="adminLoginPassword">Password</label>
          </div>

          <div id="adminLoginError" class="text-danger text-center small mb-3"></div>

          <button type="submit" class="btn btn-primary w-100 fw-semibold py-2 rounded-3">
            <i class="bi bi-unlock-fill me-2"></i>Login
          </button>
        </form>
      </div>
    </div>
  </div>
</div>


<!-- Admin Access Key Modal -->
<div class="modal fade" id="adminAccessKeyModal" tabindex="-1" aria-labelledby="adminAccessKeyModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-warning text-dark rounded-top-4">
        <h5 class="modal-title fw-bold" id="adminAccessKeyModalLabel">
          <i class="bi bi-shield-lock-fill me-2"></i>Set Your Admin Access Key
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center py-4 px-4">
        <p class="text-dark fs-5 mb-4">
          Kindly set up your <strong>6-digit Admin Access Key</strong> for 2FM safety and secured account.<br>
          Only share it with the <strong>authorized in-charge</strong>.
        </p>

        <!-- 6-digit Admin Access Key Input -->
        <div class="mb-4 d-flex justify-content-center gap-2">
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="digit1" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="digit2" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="digit3" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="digit4" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="digit5" />
          <input type="text" maxlength="1" class="form-control text-center digit-box" id="digit6" />
        </div>


        <button class="btn btn-primary w-100 fw-semibold py-2 rounded-3" id="confirmAdminAccessKeyBtn">
          Confirm & Save
        </button>
      </div>
    </div>
  </div>
</div>


<!-- Admin Sign Up Modal -->
<div class="modal fade" id="adminRegisterModal" tabindex="-1" aria-labelledby="adminRegisterModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-primary text-white rounded-top-4">
        <h5 class="modal-title fw-semibold" id="adminRegisterModalLabel">
          <i class="bi bi-person-plus-fill me-2"></i>Admin Sign Up
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body px-4 py-4">
        <p class="text-dark text-center fw-semibold mb-3" style="font-size: 1rem;">
          Use an official admin email ending with <span class="text-primary">@admin.com</span>
        </p>
        <form id="adminRegisterForm">
          <div class="form-floating mb-3">
            <input type="email" class="form-control rounded-3" id="adminEmail" placeholder="admin@example.com" required />
            <label for="adminEmail">Email (must end with @admin.com)</label>
          </div>

          <div class="form-floating mb-3">
            <input type="password" class="form-control rounded-3" id="adminPassword" placeholder="Enter password" required />
            <label for="adminPassword">Password</label>
          </div>

          <!-- Detect My Barangay Button -->
<button type="button" class="btn btn-formal mb-3" id="detectAdminBarangayBtn">Detect My Barangay</button>

        <!-- Barangay Input Field -->
        <div class="form-floating mb-4">
          <textarea class="form-control rounded-3" id="adminBarangay" placeholder="Enter barangay" style="height: 80px" required></textarea>
          <label for="adminBarangay">Barangay</label>
        </div>

        <!-- Activation Key Field -->
        <div class="form-floating mb-4">
          <input type="text" class="form-control" id="adminActivationKey" placeholder="Enter Activation Key" required />
          <label for="adminActivationKey">Activation Key (provided by FortuneTrio)</label>
        </div>
        <small class="text-muted d-block mb-3">* Use the code provided by FortuneTrio to authorize this admin registration.</small>



          <div id="adminEmailError" class="text-danger text-center small mb-3"></div>

          <button type="submit" class="btn btn-primary w-100 fw-semibold py-2 rounded-3">
            <i class="bi bi-check-circle me-2"></i>Register
          </button>
        </form>
      </div>
    </div>
  </div>
</div>



<!-- Account Success Modal -->
<div class="modal fade" id="accountSuccessModal" tabindex="-1" aria-labelledby="accountSuccessModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-success text-white rounded-top-4">
        <h5 class="modal-title fw-bold" id="accountSuccessModalLabel">Success</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center py-4">
        <i class="bi bi-check-circle-fill text-success" style="font-size: 3rem;"></i>
        <p class="mt-3 mb-0 fs-5 fw-semibold text-dark">Account successfully created!</p>
      </div>
    </div>
  </div>
</div>  

<!-- OTP Verification Modal -->
<div class="modal fade" id="otpVerifyModal" tabindex="-1" aria-labelledby="otpVerifyModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-tall">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header rounded-top-4 position-relative d-flex justify-content-center align-items-center"
           style="background: #ffffff; border-bottom: none; padding: 1rem;">
        <h5 class="modal-title fw-semibold fs-4 m-0 text-center" id="otpVerifyModalLabel" style="color: #000;">
          One-Time PIN Verification
        </h5>
        <button type="button" class="btn-close position-absolute top-0 end-0 m-3"
                data-bs-dismiss="modal" aria-label="Close" style="filter: brightness(0.7);"></button>
      </div>

      <div class="modal-body px-4 py-4">
        <p class="text-center mb-4" style="color: #444; font-size: 1rem;">
          Please enter the 6-digit code sent to your phone number.
        </p>

        <!-- 6-digit input placeholder -->
        <div class="d-flex justify-content-center gap-2 mb-3">
          <input type="text" maxlength="1" class="form-control text-center" style="width: 50px; font-size: 1.5rem;" />
          <input type="text" maxlength="1" class="form-control text-center" style="width: 50px; font-size: 1.5rem;" />
          <input type="text" maxlength="1" class="form-control text-center" style="width: 50px; font-size: 1.5rem;" />
          <input type="text" maxlength="1" class="form-control text-center" style="width: 50px; font-size: 1.5rem;" />
          <input type="text" maxlength="1" class="form-control text-center" style="width: 50px; font-size: 1.5rem;" />
          <input type="text" maxlength="1" class="form-control text-center" style="width: 50px; font-size: 1.5rem;" />
        </div>

        <button class="btn btn-primary w-100 fw-semibold py-2 rounded-3 mb-3">Verify</button>

        <div class="text-center">
          <button class="btn text-decoration-none animated-underline" id="resendOtpBtn">Resend OTP</button>
        </div>


      </div>
    </div>
  </div>
</div>  

<!-- About Us Button at top left -->
<div class="about-us-button position-fixed top-0 start-0 m-3 z-3">
  <button 
    type="button" 
    class="btn btn-primary btn-sm rounded-pill d-flex align-items-center justify-content-center shadow" 
    style="width: 110px; height: 40px; font-weight: 600;"
    data-bs-toggle="modal" data-bs-target="#aboutUsModal"
  >
    <i class="bi bi-info-circle me-2"></i> About Us
  </button>
</div>


  <!-- Social/Contact Buttons at top right -->
<div class="contact-buttons d-flex gap-3 position-fixed top-0 end-0 m-3">
  <a href="https://www.facebook.com/YourPage" target="_blank" aria-label="Facebook" class="btn btn-primary btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width:40px; height:40px;">
    <i class="bi bi-facebook fs-4"></i>
  </a>
  <a href="mailto:your.email@example.com" aria-label="Email" class="btn btn-danger btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width:40px; height:40px;">
    <i class="bi bi-envelope-fill fs-4"></i>
  </a>
  <a href="tel:+639171234567" aria-label="Phone" class="btn btn-success btn-sm rounded-circle d-flex align-items-center justify-content-center" style="width:40px; height:40px;">
    <i class="bi bi-telephone-fill fs-4"></i>
  </a>
</div>

  <section class="hero">
    <div class="container">
      <h1 class="display-4 fw-bold mb-4">Welcome to Complaint Management System</h1>
      <p class="lead mb-5">Easily report and track your barangay concerns</p>

      <div class="d-flex flex-column flex-md-row justify-content-center">
        <a href="#" class="btn btn-warning btn-lg btn-custom submit-hover" id="btnLogin" data-bs-toggle="modal" data-bs-target="#disclaimerModal">Login</a>
        <a href="#" class="btn btn-outline-light btn-lg btn-custom" id="btnSignUp" data-bs-toggle="modal" data-bs-target="#disclaimerModal">Sign Up</a>
      </div>

      <div class="register-link mt-4">
        <p>Not yet registered? <a data-bs-toggle="modal" data-bs-target="#registerModal">Click here</a></p>
      </div>
    </div>
  </section>

<!-- Email + Send OTP Modal -->
<div class="modal fade" id="emailOtpModal" tabindex="-1" aria-labelledby="emailOtpModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-tall">
    <div class="modal-content border-0 shadow-lg rounded-4">

      <!-- Header -->
      <div class="modal-header rounded-top-4 position-relative d-flex justify-content-center align-items-center"
        style="background: #ffffff; border-bottom: none; padding: 1rem;">
      <h5 class="modal-title fw-semibold fs-4 m-0 text-center" id="emailOtpModalLabel" style="color: #000;">
        Login to Your Account
      </h5>
        <button type="button" class="btn-close position-absolute top-0 end-0 m-3"
                data-bs-dismiss="modal" aria-label="Close" style="filter: brightness(0.7);"></button>
      </div>

      <!-- Body -->
      <div class="modal-body px-4 py-4">

        <!-- Alert (displays dynamically) -->
        <div id="otpAlertPlaceholder" class="alert alert-danger d-none text-center w-100 mb-3" role="alert" style="font-size: 0.9rem;"></div>

        <!-- Form -->
        <form id="emailOtpForm">
          <div class="form-floating mb-3">
            <input type="text" class="form-control rounded-3" id="loginCredential" placeholder="Email or Phone Number" required />
            <label for="loginCredential">Email or Phone Number</label>
          </div>

          <div class="form-floating mb-3">
            <input type="password" class="form-control rounded-3" id="loginPassword" placeholder="Password" required />
            <label for="loginPassword">Password</label>
          </div>

          <button type="submit" class="btn btn-primary w-100 fw-semibold py-2 rounded-3 mb-3">Login</button>
        </form>

        <!-- Register link -->
        <div class="text-center register-link mt-3" style="color: black;">
          Not yet registered? 
          <a href="#" style="color: black;" data-bs-toggle="modal" data-bs-target="#registerModal" data-bs-dismiss="modal">Click here</a>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- About Us Modal -->
<div class="modal fade" id="aboutUsModal" tabindex="-1" aria-labelledby="aboutUsModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content shadow-lg rounded-4 border-0">
      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title fw-semibold fs-3" id="aboutUsModalLabel" style="color: #2c3e50;">About Us</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body fs-6" style="color: #212529; line-height: 1.7;">
        <p><strong>The Complaint Management System (CMS)</strong> is a centralized web-based platform developed for the barangays of Davao City. It is specifically designed to empower residents by allowing them to easily submit concerns and complaints within their own barangay area.</p>
        <p>Only barangays that are enrolled in the CMS can receive and manage complaints, ensuring that submissions are securely routed to the appropriate local authorities. This targeted approach helps barangay officials act more swiftly and efficiently on reports that directly affect their community.</p>
        <p>The primary goal of CMS is to strengthen community relations by improving communication between the public and barangay officials. Through this system, we aim to promote transparency, accountability, and responsiveness—making sure every voice is heard, and every concern is addressed.</p>
        <p>Thank you for being a part of this movement towards smarter and more connected barangay governance. Together, we can build a more informed, involved, and empowered community.</p>
      </div>
      <div class="modal-footer border-0 pt-0 d-flex justify-content-end">
        <button type="button" class="btn btn-primary fw-semibold px-4 py-2 rounded-3" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Register Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-gradient text-white rounded-top-4 position-relative" 
           style="background: linear-gradient(135deg, #0066cc, #004080); border-bottom: none; padding: 1rem;">
        <!-- Gray close button -->
        <button type="button" class="btn-close position-absolute top-0 end-0 m-3" 
                data-bs-dismiss="modal" aria-label="Close" style="filter: brightness(0.7);"></button>
      </div>
      <div class="modal-body px-4 py-4">
        <!-- Stylish description here -->
        <p class="register-description">
          <strong>Create an Account</strong>
          Please fill out the form below to create your account. Make sure your information is accurate so we can serve you better.
        </p>
        <form id="registerForm">
          <div class="form-floating mb-3">
            <input type="email" class="form-control rounded-3" id="email" placeholder="name@example.com" required />
            <label for="email">Email address</label>
          </div>
          <div class="form-floating mb-3">
            <input type="text" class="form-control rounded-3" id="fullName" placeholder="Juan Dela Cruz" required />
            <label for="fullName">Full Name</label>
          </div>
          <div class="form-floating mb-1">
            <input type="tel" class="form-control rounded-3" id="phone" placeholder="09XXXXXXXXX" required />
            <label for="phone">Phone Number</label>
          </div>
          <div id="phoneError" class="text-danger mb-3" style="font-size: 0.9rem;"></div>

          <div class="form-floating mb-3">
          <input type="password" class="form-control rounded-3" id="newPassword" placeholder="Enter a new password" required />
          <label for="newPassword">New Password</label>
          </div>
          <small class="text-muted ms-1 mb-3 d-block" style="margin-top: -0.5rem;">Must be at least 8 characters and include a letter and number.</small>



          <!-- New Detect Address button -->
          <button type="button" class="btn btn-formal" id="detectAddressBtn">Detect My Barangay</button>

          <div class="form-floating mb-4">
            <textarea class="form-control rounded-3" placeholder="Enter your address here" id="address" style="height: 100px" required></textarea>
            <label for="address">Enter your Barangay</label>
          </div>
          <button type="submit" class="btn btn-primary w-100 fw-semibold py-2 rounded-3">Register</button>
        </form>
      </div>
    </div>
  </div>
</div>  

<!-- Disclaimer Modal -->
<div class="modal fade" id="disclaimerModal" tabindex="-1" aria-labelledby="disclaimerModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
  <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg">
    <div class="modal-content shadow-lg rounded-4 border-0" style="font-family: 'Poppins', sans-serif;">

      <div class="modal-header border-0 pb-0">
        <h5 class="modal-title fw-semibold fs-3" id="disclaimerModalLabel" style="color: #2c3e50;">Disclaimer</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body fs-6" style="color: #212529; max-height: 400px; overflow-y: auto; line-height: 1.6; display: flex; flex-direction: column; justify-content: flex-start;">
        <div>
          <p>By using the Complaint Management System, you hereby consent to our Privacy Policy and agree to the following terms:</p>

          <p><strong>Information Collection:</strong><br>
          The system collects personal information from residents within the barangay. The types and purposes of the data collected will be transparently communicated during data submission.</p>

          <p><strong>Additional Information:</strong><br>
          When contacting barangay officials through this system, additional details such as name, email, phone number, message contents, and attachments may be received.</p>

          <p><strong>Account Registration:</strong><br>
          Users registering accounts provide contact details including name, barangay address, email, and phone number for effective communication and service delivery.</p>

          <p><strong>Use of Information:</strong><br>
          Information collected is solely used for addressing concerns, improving services, notifying residents, and enhancing the system's functionality.</p>

          <p><strong>Privacy Policy:</strong><br>
          Clicking the ‘Accept’ button means you acknowledge and agree to the system’s Privacy Policy. Please review the policy to understand how your information is managed.</p>

          <p><strong>Disclaimer Acceptance:</strong><br>
          Continued use of this system signifies your acceptance of these terms and any future updates.</p>
        </div>

        <!-- Checkbox inside scrollable area -->
        <div class="form-check mt-3" style="flex-shrink: 0;">
          <input class="form-check-input" type="checkbox" id="disclaimerCheckbox">
          <label 
            class="form-check-label fw-bold" 
            for="disclaimerCheckbox" 
            style="user-select: none; font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 1rem; color: #212529;">Yes, I have read all the terms and conditions.
          </label>
        </div>

      <div class="modal-footer border-0 pt-0 d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-outline-danger fw-semibold px-4 py-2 rounded-3" data-bs-dismiss="modal" style="font-size: 1rem;">Decline</button>
        <button type="button" class="btn btn-primary fw-semibold px-4 py-2 rounded-3" id="disclaimerAcceptBtn" disabled>Accept</button>
      </div>
    </div>
  </div>
</div>








  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>

  const adminLoginForm = document.getElementById("adminLoginForm");
adminLoginForm?.addEventListener("submit", function (e) {
  e.preventDefault();
  const email = document.getElementById("adminLoginEmail").value.trim();
  const password = document.getElementById("adminLoginPassword").value.trim();
  const errorBox = document.getElementById("adminLoginError");
  errorBox.textContent = "";

  if (!email.endsWith("@admin.com")) {
    errorBox.textContent = "❌ Admin email must end with @admin.com";
    return;
  }
  if (password.length < 8) {
    errorBox.textContent = "❌ Password must be at least 8 characters.";
    return;
  }

  const loginModal = bootstrap.Modal.getInstance(document.getElementById("adminLoginFormModal"));
  loginModal.hide();

  setTimeout(() => {
    const keyModal = new bootstrap.Modal(document.getElementById("adminAccessKeyPromptModal"));
    keyModal.show();
  }, 300);
});

// Handle admin access key submission
const submitKeyBtn = document.getElementById("submitAdminAccessKeyBtn");
submitKeyBtn?.addEventListener("click", () => {
  const digits = [
    'accessDigit1','accessDigit2','accessDigit3',
    'accessDigit4','accessDigit5','accessDigit6'
  ].map(id => document.getElementById(id).value.trim());

  const fullKey = digits.join('');
  const errorBox = document.getElementById("adminAccessKeyError");

  if (!/^[0-9]{6}$/.test(fullKey)) {
    errorBox.textContent = "❌ Invalid 6-digit key.";
    return;
  }

  const keyModal = bootstrap.Modal.getInstance(document.getElementById("adminAccessKeyPromptModal"));
  keyModal.hide();

  setTimeout(() => {
    window.location.href = "admin.html";
  }, 300);
});

  document.getElementById("adminLoginForm")?.addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("adminLoginEmail").value.trim();
  const password = document.getElementById("adminLoginPassword").value.trim();
  const errorBox = document.getElementById("adminLoginError");

  errorBox.textContent = "";

  if (!email.endsWith("@admin.com")) {
    errorBox.textContent = "❌ Admin email must end with @admin.com";
    return;
  }

  if (password.length < 8) {
    errorBox.textContent = "❌ Password must be at least 8 characters.";
    return;
  }

  if (!/^\d{6}$/.test(accessKey)) {
    errorBox.textContent = "❌ Admin Access Key must be a valid 6-digit number.";
    return;
  }

  // ✅ Simulate successful login
  const loginModal = bootstrap.Modal.getInstance(document.getElementById("adminLoginFormModal"));
  loginModal.hide();

  setTimeout(() => {
    window.location.href = "admin-dashboard.html"; // change as needed
  }, 300);
});


  document.querySelectorAll('.digit-box').forEach((input, idx, inputs) => {
  input.setAttribute('inputmode', 'numeric');

  input.addEventListener('input', (e) => {
    const value = e.target.value.replace(/\D/g, '');
    e.target.value = value;
    if (value && idx < inputs.length - 1) {
      inputs[idx + 1].focus();
    }
  });

  input.addEventListener('keydown', (e) => {
    if (e.key === 'Backspace' && !e.target.value && idx > 0) {
      inputs[idx - 1].focus();
    }
  });
});


  document.getElementById('confirmAdminAccessKeyBtn')?.addEventListener('click', () => {
  const digits = [...document.querySelectorAll('.digit-box')].map(input => input.value.trim());
  const key = digits.join('');

  if (!/^\d{6}$/.test(key)) {
    alert('❌ Please enter a valid 6-digit numeric access key.');
    return;
  }

  const accessKeyModal = bootstrap.Modal.getInstance(document.getElementById('adminAccessKeyModal'));
  accessKeyModal.hide();

  const successModal = new bootstrap.Modal(document.getElementById('accountSuccessModal'));
  setTimeout(() => successModal.show(), 300);
});



  document.getElementById("adminRegisterForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const email = document.getElementById("adminEmail").value.trim();
  const password = document.getElementById("adminPassword").value.trim();
  const barangay = document.getElementById("adminBarangay").value.trim();
  const activationKey = document.getElementById('adminActivationKey').value.trim();
if (activationKey !== "F32024") {
  alert("❌ Invalid Activation Key. Please contact FortuneTrio for the correct code.");
  return;
}
  const errorBox = document.getElementById("adminEmailError");

  errorBox.textContent = "";

  if (!email.endsWith("@admin.com")) {
    errorBox.textContent = "Email must end with @admin.com";
    return;
  }

  if (password.length < 8) {
    errorBox.textContent = "Password must be at least 8 characters.";
    return;
  }

  if (!barangay) {
    errorBox.textContent = "Please enter your barangay.";
    return;
  }

// ✅ Simulate OTP process for admin
otpSource = 'admin';
const adminModal = bootstrap.Modal.getInstance(document.getElementById("adminRegisterModal"));
adminModal.hide();

const accessKeyModal = new bootstrap.Modal(document.getElementById('adminAccessKeyModal'));
accessKeyModal.show();



this.reset();
});

  let otpSource = null; // ✅ Track the OTP source

  // ✅ 1. Disclaimer Checkbox Toggle
  const checkbox = document.getElementById('disclaimerCheckbox');
  const acceptBtn = document.getElementById('disclaimerAcceptBtn');
  checkbox.addEventListener('change', () => {
    acceptBtn.disabled = !checkbox.checked;
  });

  // ✅ 2. Input Restrictions
  const phoneInput = document.getElementById('phone');
  phoneInput.addEventListener('input', function () {
    let digitsOnly = this.value.replace(/\D/g, '');
    if (digitsOnly.length > 11) {
      digitsOnly = digitsOnly.slice(0, 11);
    }
    this.value = digitsOnly;
  });

  const nameInput = document.getElementById('fullName');
  nameInput.addEventListener('input', function () {
    this.value = this.value.replace(/[^.A-Za-zñÑ\s\-]/g, '');
  });

  // ✅ 3. Registration Form
  const validPrefixes = ['0817','0905','0906','0915','0916','0917','0926','0927','0935','0936','0945','0955','0965','0975','0994','0995','0907','0908','0909','0910','0912','0918','0919','0920','0921','0928','0929','0930','0938','0939','0946','0947','0948','0949','0950','0961','0968','0970','0979','0998','0999','0922','0923','0924','0925','0931','0932','0933','0934'];

  document.getElementById("registerForm").addEventListener("submit", function (e) {
    e.preventDefault();
    const email = document.getElementById('email').value.trim();
    const fullName = document.getElementById('fullName').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const address = document.getElementById('address').value.trim();
    const password = document.getElementById('newPassword').value.trim();
    const phoneError = document.getElementById('phoneError');
    phoneError.textContent = '';

    if (!email || !fullName || !phone || !address) {
      alert("Please fill in all the fields before submitting.");
      return;
    }

    if (phone.length !== 11 || !phone.startsWith('09')) {
      phoneError.textContent = "Please provide a valid 11-digit phone number starting with '09'.";
      return;
    }

    const prefix = phone.slice(0, 4);
    if (!validPrefixes.includes(prefix)) {
      phoneError.textContent = "Invalid mobile number prefix. Please provide a valid Philippine mobile number.";
      return;
    }

    const passwordPattern = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d!@#$%^&*]{8,}$/;
    if (!passwordPattern.test(password)) {
      alert("Password must be at least 8 characters long and include at least one letter and one number.");
      return;
    }

    otpSource = 'register'; // ✅ mark source

    const registerModalInstance = bootstrap.Modal.getInstance(document.getElementById('registerModal'));
    registerModalInstance.hide();

    const otpVerifyModal = new bootstrap.Modal(document.getElementById('otpVerifyModal'));
    otpVerifyModal.show();

    this.reset();
  });

  // ✅ 4. Detect Address via Geolocation
  document.getElementById('detectAddressBtn').addEventListener('click', () => {
    const addressField = document.getElementById('address');
    if (!navigator.geolocation) {
      alert('Geolocation is not supported by your browser');
      return;
    }

    addressField.value = 'Detecting your location...';

    navigator.geolocation.getCurrentPosition(success, error, {
      enableHighAccuracy: true,
      timeout: 10000,
      maximumAge: 0
    });

    function success(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`)
        .then(response => response.json())
        .then(data => {
          const addr = data.address || {};
          let displayAddress = [addr.road, addr.suburb, addr.city || addr.town || addr.village, addr.state, addr.postcode, addr.country].filter(Boolean).join(', ');
          addressField.value = displayAddress || 'Unable to detect address, please enter manually.';
        })
        .catch(() => {
          addressField.value = 'Unable to detect address, please enter manually.';
        });
    }

    function error(err) {
      const messages = {
        1: "Permission denied. Please allow location access.",
        2: "Position unavailable. Try again later.",
        3: "Location request timed out. Try again.",
        default: "An unknown error occurred."
      };
      alert(messages[err.code] || messages.default);
      addressField.value = '';
    }
  });

    // ✅ Admin Detect My Barangay
  document.getElementById('detectAdminBarangayBtn')?.addEventListener('click', () => {
    const adminBarangayField = document.getElementById('adminBarangay');
    if (!navigator.geolocation) {
      alert('Geolocation is not supported by your browser');
      return;
    }

    adminBarangayField.value = 'Detecting your location...';

    navigator.geolocation.getCurrentPosition(success, error, {
      enableHighAccuracy: true,
      timeout: 10000,
      maximumAge: 0
    });

    function success(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`)
        .then(response => response.json())
        .then(data => {
          const addr = data.address || {};
          const display = [
            addr.road,
            addr.suburb,
            addr.city || addr.town || addr.village,
            addr.state,
            addr.postcode,
            addr.country
          ].filter(Boolean).join(', ');
          adminBarangayField.value = display || 'Unable to detect address, please enter manually.';
        })
        .catch(() => {
          adminBarangayField.value = 'Unable to detect address, please enter manually.';
        });
    }

    function error(err) {
      const messages = {
        1: "Permission denied. Please allow location access.",
        2: "Position unavailable. Try again later.",
        3: "Location request timed out. Try again.",
        default: "An unknown error occurred."
      };
      alert(messages[err.code] || messages.default);
      adminBarangayField.value = '';
    }
  });


  // ✅ 5. Handle Accept Button Logic
  document.addEventListener('DOMContentLoaded', () => {
    const disclaimerModal = new bootstrap.Modal(document.getElementById('disclaimerModal'));
    const emailOtpModal = new bootstrap.Modal(document.getElementById('emailOtpModal'));
    const registerModal = new bootstrap.Modal(document.getElementById('registerModal'));

    const btnLogin = document.getElementById('btnLogin');
    const btnSignUp = document.getElementById('btnSignUp');
    const btnAccept = document.getElementById('disclaimerAcceptBtn');

    let actionToPerform = null;

    btnLogin?.addEventListener('click', (e) => {
      e.preventDefault();
      actionToPerform = 'login';
    });

    btnSignUp?.addEventListener('click', (e) => {
      e.preventDefault();
      actionToPerform = 'signup';
    });

    btnAccept?.addEventListener('click', () => {
      disclaimerModal.hide();
      if (actionToPerform === 'login') {
        emailOtpModal.show();
      } else if (actionToPerform === 'signup') {
        registerModal.show();
      }
      actionToPerform = null;
    });
  });

  // ✅ 6. OTP Modal Logic
  document.getElementById("emailOtpForm")?.addEventListener("submit", function (e) {
    e.preventDefault();
    otpSource = 'login';
    const emailOtpModalInstance = bootstrap.Modal.getInstance(document.getElementById('emailOtpModal'));
    emailOtpModalInstance.hide();
    const otpVerifyModal = new bootstrap.Modal(document.getElementById('otpVerifyModal'));
    otpVerifyModal.show();
  });

  document.addEventListener('DOMContentLoaded', () => {
    const otpInputs = document.querySelectorAll('#otpVerifyModal input[type="text"]');
    const verifyBtn = document.querySelector('#otpVerifyModal button.btn-primary');
    const otpModalEl = document.getElementById('otpVerifyModal');

    function checkOtpFilled() {
      return [...otpInputs].every(input => input.value.trim() !== '');
    }

    function toggleVerifyButton() {
      verifyBtn.disabled = !checkOtpFilled();
    }

    otpInputs.forEach((input, index) => {
      input.setAttribute('inputmode', 'numeric');
      input.setAttribute('autocomplete', 'one-time-code');

      input.addEventListener('input', (e) => {
        const value = e.target.value;
        if (value.length === 1 && index < otpInputs.length - 1) {
          otpInputs[index + 1].focus();
        }
        toggleVerifyButton();
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace' && input.value === '' && index > 0) {
          otpInputs[index - 1].focus();
        }
      });

      input.addEventListener('paste', (e) => {
        e.preventDefault();
        const pasteData = e.clipboardData.getData('text').slice(0, otpInputs.length);
        [...pasteData].forEach((char, idx) => {
          if (otpInputs[idx]) {
            otpInputs[idx].value = char;
          }
        });
        const next = pasteData.length < otpInputs.length ? pasteData.length : otpInputs.length - 1;
        otpInputs[next].focus();
        toggleVerifyButton();
      });
    });

    verifyBtn.addEventListener('click', () => {
      if (checkOtpFilled()) {
        const otpModal = bootstrap.Modal.getInstance(otpModalEl);
        otpModal.hide();

        if (otpSource === 'register' || otpSource === 'admin') {
          const successModal = new bootstrap.Modal(document.getElementById('accountSuccessModal'));
          setTimeout(() => successModal.show(), 300);
        } else if (otpSource === 'login') {
          setTimeout(() => {
            window.location.href = 'user.html';
          }, 300);
        }


        otpSource = null;
      }
    });

    toggleVerifyButton();
  });
</script>


</body>
</html>
